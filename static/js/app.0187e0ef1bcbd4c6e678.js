webpackJsonp([1],{122:function(t,n,e){"use strict";var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"post-view"},[t.loading?t._e():e("div",[e("div",{staticClass:"title",domProps:{innerHTML:t._s(t.post.title)}}),t._v(" "),e("section",{staticClass:"content",domProps:{innerHTML:t._s(t.post.content)}})])])},a=[],o={render:i,staticRenderFns:a};n.a=o},17:function(t,n,e){"use strict";n.a={methods:{debug:function(t){console.log("debug",t)},go:function(t){"Post"===t.name&&this.showLoading(),this.$router.push(t)},goBack:function(){this.$router.go(-1)},showLoading:function(){this.$root.$data.shared.loading=!0},hideLoading:function(){this.$root.$data.shared.loading=!1}},computed:{loading:function(){return this.$root.$data.shared.loading}}}},28:function(t,n,e){"use strict";var i=e(17);n.a={mixins:[i.a],name:"app"}},29:function(t,n,e){"use strict";var i=e(17),a=e(61),o=e.n(a),s=0;n.a={name:"List",mixins:[i.a],data:function(){return{list:null,msg:null}},methods:{getPostId:function(t){return/view\/(\w*)\.htm/.exec(t)[1]},getList:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;return s++,o.a.get("/api/cnbeta",{timeout:n}).then(function(n){t.list=n.data,t.msg=null,t.hideLoading()}).catch(function(n){if(console.log("Fetch Error :-S",n),400===n.status)return console.log("Looks like there was a problem. Status Code: "+n.status),void(t.msg=n.status+": "+n.message);s<=10?(t.msg="服务器连接超时，正在重试("+s+")",t.getList(1e3)):(t.msg="服务器连接失败, 请稍后再访问",t.hideLoading())})}},computed:{skeletonList:function(){var t=[];return t.length=25,t}},created:function(){"Post"!==this.$route.name&&this.getList(),window.document.addEventListener("backbutton",function(t){window.onpopstate=function(t){"app"in window.navigator&&window.navigator.app.exitApp()},t.preventDefault?t.preventDefault():t.returnValue=!1})},mounted:function(){}}},35:function(t,n,e){"use strict";var i=e(83),a=e.n(i),o=e(86),s=e.n(o),r=e(17);n.a={name:"Post",mixins:[r.a],data:function(){return{post:null,err:null}},methods:{},beforeRouteEnter:function(t,n,e){var i=this;fetch("/api/cnbeta/"+t.params.id).then(function(t){if(200!==t.status)return void console.log("Looks like there was a problem. Status Code: "+t.status);e(function(){var n=s()(a.a.mark(function n(e){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.json();case 2:e.post=n.sent,e.hideLoading();case 4:case"end":return n.stop()}},n,i)}));return function(t){return n.apply(this,arguments)}}())})},mounted:function(){}}},50:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e(26),a=e(53),o=e(57);i.a.config.productionTip=!1;var s={loading:!0};new i.a({el:"#app",data:{shared:s},router:o.a,template:"<App/>",components:{App:a.a}})},53:function(t,n,e){"use strict";function i(t){e(54)}var a=e(28),o=e(56),s=e(16),r=i,c=s(a.a,o.a,!1,r,null,null);n.a=c.exports},54:function(t,n){},56:function(t,n,e){"use strict";var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[e("header",["Home"===t.$route.name?e("div",{staticClass:"title link",on:{click:function(n){t.go({path:"/"})}}},[t._v("\n        Cnbeta\n        "),e("span",{staticClass:"sub"},[t._v("Lite")])]):e("div",{on:{click:t.goBack}},[t._v("返回")])]),t._v(" "),e("div",{staticClass:"main"},[e("keep-alive",[t.$route.meta.keepAlive?e("router-view"):t._e()],1),t._v(" "),t.$route.meta.keepAlive?t._e():e("transition",{attrs:{name:"fade"}},[e("router-view")],1)],1),t._v(" "),t._m(0),t._v(" "),t.loading?e("div",{staticClass:"loading"},[e("Spinner",{attrs:{"line-fg-color":"#32669a"}})],1):t._e()])},a=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("footer",[e("a",{attrs:{href:"https://github.com/cyio/cnbeta-pwa",target:"_blank"}},[t._v("cyio/cnbeta-pwa")])])}],o={render:i,staticRenderFns:a};n.a=o},57:function(t,n,e){"use strict";var i=e(26),a=e(58),o=e(59),s=e(81),r=e(123),c=e.n(r);i.a.use(a.a),i.a.component("Spinner",c.a),n.a=new a.a({mode:"history",scrollBehavior:function(t,n,e){if(e)setTimeout(function(){window.scrollTo(e.x,e.y)},200);else if("Post"===t.name)return{x:0,y:0}},routes:[{path:"/",name:"Home",component:o.a,meta:{keepAlive:!0}},{path:"/post/:id",name:"Post",component:s.a},{path:"*",redirect:"/"}]})},59:function(t,n,e){"use strict";function i(t){e(60)}var a=e(29),o=e(80),s=e(16),r=i,c=s(a.a,o.a,!1,r,null,null);n.a=c.exports},60:function(t,n){},80:function(t,n,e){"use strict";var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"home-view"},[t.msg?e("div",{staticClass:"msg"},[t._v(t._s(t.msg))]):t._e(),t._v(" "),e("div",{staticClass:"list"},t._l(t.list||t.skeletonList,function(n){return e("div",{staticClass:"item"},[t.list?e("div",{staticClass:"link",attrs:{title:n.title},on:{click:function(e){t.go({name:"Post",params:{id:n.id}})}}},[t._v(t._s(n.title))]):t._e()])}))])},a=[],o={render:i,staticRenderFns:a};n.a=o},81:function(t,n,e){"use strict";function i(t){e(82)}var a=e(35),o=e(122),s=e(16),r=i,c=s(a.a,o.a,!1,r,null,null);n.a=c.exports},82:function(t,n){}},[50]);
//# sourceMappingURL=app.0187e0ef1bcbd4c6e678.js.map